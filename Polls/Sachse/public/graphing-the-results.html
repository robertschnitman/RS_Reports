<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Graphing the Results | Using the R Programming Language to Report the Sachse, TX January 2020 Special Election Pre-runoff Results</title>
  <meta name="description" content="The purpose of this document is to demonstrate the utility of using the R programming language in reporting polls by walking through the process via the software itself." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Graphing the Results | Using the R Programming Language to Report the Sachse, TX January 2020 Special Election Pre-runoff Results" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The purpose of this document is to demonstrate the utility of using the R programming language in reporting polls by walking through the process via the software itself." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Graphing the Results | Using the R Programming Language to Report the Sachse, TX January 2020 Special Election Pre-runoff Results" />
  
  <meta name="twitter:description" content="The purpose of this document is to demonstrate the utility of using the R programming language in reporting polls by walking through the process via the software itself." />
  

<meta name="author" content="Robert Schnitman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>1</b> Setup</a>
<ul>
<li class="chapter" data-level="1.1" data-path="setup.html"><a href="setup.html#loading-libraries"><i class="fa fa-check"></i><b>1.1</b> Loading Libraries</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="setup.html"><a href="setup.html#r-code-libaries-loading-loop"><i class="fa fa-check"></i><b>1.1.1</b> R Code: Libaries Loading Loop</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#importing-the-data"><i class="fa fa-check"></i><b>2.1</b> Importing the Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#r-code-importing-the-dataset-and-presenting-the-results-in-a-tabular-format"><i class="fa fa-check"></i><b>2.1.1</b> R Code: Importing the Dataset and Presenting the Results in a Tabular Format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphing-the-results.html"><a href="graphing-the-results.html"><i class="fa fa-check"></i><b>3</b> Graphing the Results</a>
<ul>
<li class="chapter" data-level="3.0.1" data-path="graphing-the-results.html"><a href="graphing-the-results.html#r-code-graphing-the-total-votes-by-candidate"><i class="fa fa-check"></i><b>3.0.1</b> R Code: Graphing the Total Votes by Candidate</a></li>
<li class="chapter" data-level="3.0.2" data-path="graphing-the-results.html"><a href="graphing-the-results.html#r-code-theme-function"><i class="fa fa-check"></i><b>3.0.2</b> R Code: Theme Function</a></li>
<li class="chapter" data-level="3.0.3" data-path="graphing-the-results.html"><a href="graphing-the-results.html#r-code-graphing-early-voting-and-election-day-votes"><i class="fa fa-check"></i><b>3.0.3</b> R Code: Graphing Early Voting and Election Day Votes</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>4</b> Conclusion</a>
<ul>
<li class="chapter" data-level="4.1" data-path="conclusion.html"><a href="conclusion.html#limitations"><i class="fa fa-check"></i><b>4.1</b> Limitations</a></li>
<li class="chapter" data-level="4.2" data-path="conclusion.html"><a href="conclusion.html#future-work"><i class="fa fa-check"></i><b>4.2</b> Future Work</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using the R Programming Language to Report the Sachse, TX January 2020 Special Election Pre-runoff Results</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="graphing-the-results" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Graphing the Results</h1>
<p>To easily visualize the poll rankings, we plot a bar chart of the total votes by candidate using <code>ggplot2</code> functions, arranging the bars by total votes in descending order with the <code>reorder()</code> function. The graph places the candidates on the vertical axis so that their names are more easily readable than if they were on the other axis. Percentages are displayed so that readers may know the relative magnitude of the total votes.</p>
<div id="r-code-graphing-the-total-votes-by-candidate" class="section level3" number="3.0.1">
<h3><span class="header-section-number">3.0.1</span> R Code: Graphing the Total Votes by Candidate</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="graphing-the-results.html#cb3-1"></a><span class="kw">ggplot</span>(data) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-2"><a href="graphing-the-results.html#cb3-2"></a><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> <span class="kw">reorder</span>(candidate, votes_total), </span>
<span id="cb3-3"><a href="graphing-the-results.html#cb3-3"></a>      <span class="dt">y =</span> votes_total, </span>
<span id="cb3-4"><a href="graphing-the-results.html#cb3-4"></a>      <span class="dt">fill =</span> <span class="kw">reorder</span>(candidate, votes_total),</span>
<span id="cb3-5"><a href="graphing-the-results.html#cb3-5"></a>      <span class="dt">label =</span> <span class="kw">paste0</span>(votes_total,<span class="st">&#39;; &#39;</span>, votes_total_pct, <span class="st">&#39;%&#39;</span>)) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-6"><a href="graphing-the-results.html#cb3-6"></a><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">stat =</span> <span class="st">&#39;identity&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-7"><a href="graphing-the-results.html#cb3-7"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">nudge_y =</span> <span class="dv">36</span>) <span class="op">+</span></span>
<span id="cb3-8"><a href="graphing-the-results.html#cb3-8"></a><span class="st">  </span><span class="kw">scale_fill_brewer</span>(<span class="dt">palette =</span> <span class="st">&#39;Blues&#39;</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-9"><a href="graphing-the-results.html#cb3-9"></a><span class="st">  </span><span class="kw">ylim</span>(<span class="dv">0</span>, <span class="dv">350</span>) <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-10"><a href="graphing-the-results.html#cb3-10"></a><span class="st">  </span><span class="kw">coord_flip</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-11"><a href="graphing-the-results.html#cb3-11"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="st">&#39;&#39;</span>,</span>
<span id="cb3-12"><a href="graphing-the-results.html#cb3-12"></a>       <span class="dt">y =</span> <span class="st">&#39;Total Votes&#39;</span>,</span>
<span id="cb3-13"><a href="graphing-the-results.html#cb3-13"></a>       <span class="dt">title =</span> <span class="st">&#39;Figure 2: Total Votes by Candidate&#39;</span>) <span class="op">+</span></span>
<span id="cb3-14"><a href="graphing-the-results.html#cb3-14"></a><span class="st">  </span><span class="kw">theme_light</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb3-15"><a href="graphing-the-results.html#cb3-15"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb3-16"><a href="graphing-the-results.html#cb3-16"></a>        <span class="dt">panel.grid.major.y =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb3-17"><a href="graphing-the-results.html#cb3-17"></a>        <span class="dt">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span></code></pre></div>
<p><img src="sachse2020-web_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>For the next graph, early voting numbers are plotted against Election Day votes to grasp their relationship more clearly. First, a function called <code>theme_light2()</code>–based on <code>theme_light</code> from <code>ggplot2</code>–is created in a way that emphasizes the data points by minimizing the number of non-data elements (e.g. background color).</p>
</div>
<div id="r-code-theme-function" class="section level3" number="3.0.2">
<h3><span class="header-section-number">3.0.2</span> R Code: Theme Function</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="graphing-the-results.html#cb4-1"></a>theme_light2 &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb4-2"><a href="graphing-the-results.html#cb4-2"></a>  </span>
<span id="cb4-3"><a href="graphing-the-results.html#cb4-3"></a>  <span class="kw">theme_light</span>() <span class="op">+</span><span class="st"> </span></span>
<span id="cb4-4"><a href="graphing-the-results.html#cb4-4"></a><span class="st">  </span><span class="kw">theme</span>(<span class="dt">panel.grid.minor =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb4-5"><a href="graphing-the-results.html#cb4-5"></a>        <span class="dt">panel.grid.major.x =</span> <span class="kw">element_blank</span>(),</span>
<span id="cb4-6"><a href="graphing-the-results.html#cb4-6"></a>        <span class="dt">legend.position =</span> <span class="st">&#39;none&#39;</span>)</span>
<span id="cb4-7"><a href="graphing-the-results.html#cb4-7"></a>  </span>
<span id="cb4-8"><a href="graphing-the-results.html#cb4-8"></a>}</span></code></pre></div>
<p>To plot the names of the candidates more easily, we extract only their last names with a combination of <code>gsub()</code> from base R; <code>str_split()</code> from the <code>stringr</code> library within <code>tidyverse</code>; and <code>map_chr()</code> from the <code>purrr</code> package within <code>tidyverse</code>. A plot with text as the geometry is then plotted.</p>
</div>
<div id="r-code-graphing-early-voting-and-election-day-votes" class="section level3" number="3.0.3">
<h3><span class="header-section-number">3.0.3</span> R Code: Graphing Early Voting and Election Day Votes</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="graphing-the-results.html#cb5-1"></a>data<span class="op">$</span>last_name &lt;-<span class="st"> </span>data<span class="op">$</span>candidate <span class="op">%&gt;%</span></span>
<span id="cb5-2"><a href="graphing-the-results.html#cb5-2"></a><span class="st">  </span><span class="kw">gsub</span>(<span class="st">&#39; Jr</span><span class="ch">\\</span><span class="st">.&#39;</span>, <span class="st">&#39;&#39;</span>, .) <span class="op">%&gt;%</span></span>
<span id="cb5-3"><a href="graphing-the-results.html#cb5-3"></a><span class="st">  </span><span class="kw">str_split</span>(<span class="st">&#39; &#39;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb5-4"><a href="graphing-the-results.html#cb5-4"></a><span class="st">  </span><span class="kw">map_chr</span>(<span class="op">~</span><span class="st"> </span>.x[<span class="kw">length</span>(.x)])</span>
<span id="cb5-5"><a href="graphing-the-results.html#cb5-5"></a></span>
<span id="cb5-6"><a href="graphing-the-results.html#cb5-6"></a><span class="kw">ggplot</span>(data) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-7"><a href="graphing-the-results.html#cb5-7"></a><span class="st">  </span><span class="kw">aes</span>(<span class="dt">x =</span> votes_early, <span class="dt">y =</span> votes_election_day, <span class="dt">label =</span> last_name) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-8"><a href="graphing-the-results.html#cb5-8"></a><span class="st">  </span><span class="kw">geom_text</span>(<span class="dt">col =</span> <span class="st">&#39;cyan4&#39;</span>, <span class="dt">position =</span> <span class="kw">position_jitter</span>()) <span class="op">+</span><span class="st"> </span></span>
<span id="cb5-9"><a href="graphing-the-results.html#cb5-9"></a><span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">&#39;Votes on Election Day&#39;</span>,</span>
<span id="cb5-10"><a href="graphing-the-results.html#cb5-10"></a>       <span class="dt">x =</span> <span class="st">&#39;Votes During the Early Voting Period&#39;</span>,</span>
<span id="cb5-11"><a href="graphing-the-results.html#cb5-11"></a>       <span class="dt">title =</span> <span class="st">&#39;Figure 3: Early and Election Day Voting Behavior&#39;</span>)  <span class="op">+</span></span>
<span id="cb5-12"><a href="graphing-the-results.html#cb5-12"></a><span class="st">  </span><span class="kw">theme_light2</span>()</span></code></pre></div>
<p><img src="sachse2020-web_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
},
"search": false
});
});
</script>

</body>

</html>
